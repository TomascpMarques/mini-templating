<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="./../dist/mini.js">
    </script>
</head>

<body>
    <main id="app" name="application">
        <button id="bt1" onclick="app.handle('addOne')">
            Add 1
        </button>
        <button id="bt2" onclick="app.handle('spaceOutLetters')">
            Change text
        </button>
        <button id="bt3" onclick="app.handle('2x')">
            Multiply by 2
        </button>
        <button id="bt4" onclick="app.handle('docWrite')">
            Write in doc
        </button>
        <p id="p1" @bind>Here {{@state1}}</p>
        <!--
            This technique will proably work with all input types
            as long the binded state is appropriate to the input type.
         -->
        <input type="number" name="a" id="inp1" @value="{{state2}">
        <!-- TODO: Text areas need a diferent way of tempating -->
        <textarea name="yes" id="txt1" cols="30" rows="10" @value="{{state3}}">
        </textarea>
        <!--
            1. get all @text atributted elements
            2. filter for the template areas
            3. store the element and template areas position
            4. update the template with the value.
            (5). to keep updatin the value, refer to the previous stored value
         -->
        <textarea name="yes2" id="rows" cols="30" rows="10" @text>Some stuff here {{#state1#}}</textarea>
        <ul @bind>
            <li>{{@state1}}</li>
            <li>{{@state2}}</li>
            <li>{{@state3}}</li>
        </ul>
        <input type="text" name="yes" id="aaaa" @value="{{state1}}">
        <mini-basic ptext="Yes baby!"></mini-basic>
        <p @bind>Should update: {{@state2}} Lorem, ipsum dolor.</p>
        <div>
            <p>Lorem ipsum dolor sit amet.</p>
            <p @bind>Shoul also update: {{@state3}}</p>
        </div>
        <p>Lorem ipsum dolor sit amet.</p>
    </main>
    <script>
        const app = newMini({
            entry: "app",
            appState: {
                state1: 1,
                state2: 4,
                state3: "Hello",
            },
            actions: {
                "docWrite": {
                    "target": "state1",
                    do: (d) => {
                        console.log('Here')
                        return d;
                    }
                },
                "addOne": {
                    target: "state1",
                    do: (targ) => {
                        return ++targ;
                    }
                },
                "2x": {
                    target: "state2",
                    do: (targ) => {
                        return targ *= 2;
                    },
                },
                "spaceOutLetters": {
                    target: "state3",
                    do: (targ) => {
                        targ = targ.split('').join(' ');
                        return targ;
                    },
                }
            },
            debug: false,
        });
    </script>
</body>

</html>