<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="./../dist/mini.js"></script>
</head>

<body>
    <main id="app" name="application">
        <button id="bt1" onclick="app.handle('addOne')">Add 1</button>
        <button id="bt2" onclick="app.handle('spaceOutLetters')">
            Change text
        </button>
        <button id="bt3" onclick="app.handle('2x')">Multiply by 2</button>
        <button id="bt4" onclick="app.handle('docWrite')">Write in doc</button>
        <p id="p1" @bind>Here {{@state1}}</p>
        <!--
            This technique will proably work with all input types
            as long the binded state is appropriate to the input type.
         -->
        <input type="color" @value="{{state5}}" />
        <input type="number" name="a" id="inp1" @value="{{state1}}" />
        <input type="number" name="a" id="inp133" @value="{{state1}}" />
        <textarea name="yas" id="txt2" cols="30" rows="10" @bind>
            !!!Some stuff here for you, {{@state3}}
        </textarea>
        <!--
            1. get all @text atributted elements
            2. filter for the template areas
            3. store the element and template areas position
            4. update the template with the value.
            (5). to keep updatin the value, refer to the previous stored value
         -->
        <textarea name="yes2" id="rows" cols="30" rows="10" @bind>
            Some stuff here {{@state1}}
        </textarea>
        <ul @bind>
            <li>{{@state1}}</li>
            <li>{{@state2}}</li>
            <li>{{@state3}}</li>
        </ul>
        <input type="text" name="yes" id="aaaa" @value="{{state1}}" />
        <mini-basic ptext="Yes baby!"></mini-basic>
        <p @bind>Should update: {{@state2}} Lorem, ipsum dolor.</p>
        <div>
            <p>Lorem ipsum dolor sit amet.</p>
            <p @bind>Shoul also update: {{@state3}}</p>
        </div>
        <p>Lorem ipsum dolor sit amet.</p>
        <input type="number" id="inp111" @value="{{num1}}">
        <input type="number" id="inp112" @value="{{num2}}">
        <!-- <input type="number" id="inp111" @value="{{num1}}" onchange="app.updateStateValuesFormBindings(null, this.value, 'num1')" />
        <input type="number" id="inp112" @value="{{num2}}" onchange="app.updateStateValuesFormBindings(null, this.value, 'num2')" /> -->
        <button id=" bt1 " onclick="app.handle('sumTwoNumbers')">
            Sum numbers
        </button>
        <p @bind>O valor da soma Ã©: {{@result}}</p>
    </main>
    <script>
        const app = newMini({
            entry: 'app',
            store: {
                state1: 1,
                state2: 4,
                state3: 'Hello',
                state5: '#ffbaa0',
                num1: 0,
                num2: 0,
                result: 0,
            },
            actions: {
                sumTwoNumbers: {
                    target: 'result',
                    do: (state, t) => {
                        const value1 = state['num1'];
                        const value2 = state['num2'];
                        console.log(`O valor da appState: ${app.store['num2']}`);
                        t = Number(value1) + Number(value2);
                        return t;
                    },
                },
                docWrite: {
                    target: '_',
                    do: () => {
                        console.log('Here');
                    },
                },
                addOne: {
                    target: 'state1',
                    do: (_, targ) => {
                        return ++targ;
                    },
                },
                '2x': {
                    target: 'state2',
                    do: (_, targ) => {
                        return (targ *= 2);
                    },
                },
                'spaceOutLetters': {
                    target: 'state3',
                    do: (_, targ) => {
                        targ = 'Good Bye';
                        return targ;
                    },
                },
            },
            debug: true,
        });
    </script>
</body>

</html>